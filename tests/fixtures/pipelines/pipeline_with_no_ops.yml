---
version: 0.6

kind: pipeline

name: test-pipeline

tags:
  backend: native

templates:

  - kind: job
    name: job-template
    description: job to process something
    tags: {tag11: tag12}
    inputs:
    - name: bucket
      type: s3_path
    contexts:
      build:
        image: my_image
        build_steps:
        - pip install package1
    environment:
      resources: {requests: {cpu: 1}}
      node_selector: {polyaxon: experiments}
      service_account: service
      image_pull_secrets: [secret1, secret2]
    termination:
      max_retries: 2
      ttl: 3600
