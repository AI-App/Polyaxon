---
version: 1

kind: experiment

settings:
  logging:
    level: INFO
    path: /mypath/project1

environment:
  resources:
    cpu:
      requests: 1
      limits: 2

  node_selectors:
    polyaxon.com: node_for_master_task

  mxnet:
    n_workers: 5
    n_ps: 10

    default_worker_resources:
      cpu:
        requests: 3
        limits: 3
      memory:
          requests: 256
          limits: 256

    worker_resources:
      - index: 3
        memory:
          requests: 300
          limits: 300

    default_ps_resources:
      cpu:
        requests: 2
        limits: 4

    ps_resources:
      - index: 9
        memory:
          requests: 512
          limits: 1024

    default_worker_node_selectors:
      polyaxon.com: node_for_worker_tasks

    worker_node_selectors:
      - index: 2
        polyaxon.com: node_for_worker_task_2

    default_ps_node_selectors:
      polyaxon.com: node_for_ps_tasks

    ps_node_selectors:
      - index: 2
        polyaxon.com: node_for_ps_task_2


run:
  image: my_image
  cmd: video_prediction_train --model=DNA --num_masks=1
...
